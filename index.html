<!DOCTYPE html>
<html>
<head>
	<title>Maskenzone Erfurt</title>

	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	
	<link rel="shortcut icon" type="image/x-icon" href="docs/images/favicon.ico" />

    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" integrity="sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A==" crossorigin=""/>
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js" integrity="sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NOQV44cWnUrBc8PkAOcXy20w0vlaXaVUearIOBhiXZ5V3ynxwA==" crossorigin=""></script>
	
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet-easybutton@2/src/easy-button.css">
	<script src="https://cdn.jsdelivr.net/npm/leaflet-easybutton@2/src/easy-button.js"></script>

	<style>
	.box {
		 position: absolute;
		 top: 0px;
		 left: 0px;
		 width: 100%;
		 height: 100%;
	}
	</style>
</head>
<body>
<div id="map" class="box"></div>
<script>
	const staticjson = '{"type":"FeatureCollection","features":[{"type":"Feature","properties":{"stroke":"#555555","stroke-width":1.9,"stroke-opacity":0.7,"fill":"#555555","fill-opacity":0.2},"geometry":{"type":"Polygon","coordinates":[[[11.036812663078306,50.972899940623826],[11.036657094955444,50.973136393660276],[11.036303043365479,50.97360929612155],[11.035981178283691,50.97414975018082],[11.036195755004881,50.974244328994565],[11.036818027496338,50.97454833101982],[11.037354469299316,50.97478477566359],[11.03776216506958,50.97500770808227],[11.038105487823486,50.97523063943073],[11.038545370101929,50.97559543387432],[11.03875994682312,50.97585889474585],[11.038899421691895,50.97621017358273],[11.038845777511597,50.97700054124998],[11.038727760314941,50.97757473154591],[11.038416624069212,50.977946262659806],[11.037440299987793,50.97900004382756],[11.036839485168457,50.97961473846458],[11.03599190711975,50.980580670738256],[11.035906076431273,50.980648217697954],[11.035466194152832,50.981127798285954],[11.034897565841675,50.98172220115393],[11.034382581710815,50.9821882617163],[11.033374071121216,50.982789405387514],[11.032805442810059,50.98316089477604],[11.032172441482544,50.983498609822455],[11.031721830368042,50.98369448342374],[11.031174659729004,50.9838363224122],[11.03025197982788,50.9839849151734],[11.029554605484009,50.9840794739556],[11.028943061828613,50.98424832844483],[11.02879285812378,50.98433613253649],[11.02852463722229,50.98460629793075],[11.028395891189575,50.984822429114146],[11.028374433517456,50.984998034959695],[11.028352975845337,50.98526144248253],[11.028374433517456,50.985524848510714],[11.028363704681396,50.98578149910055],[11.02828860282898,50.986186733984965],[11.027934551239012,50.986862117597745],[11.027108430862425,50.98669327261579],[11.026550531387329,50.98658521150502],[11.026335954666138,50.98649065782674],[11.025810241699219,50.986227257278834],[11.02529525756836,50.985822022748195],[11.024876832962036,50.98553160249181],[11.02403998374939,50.98508583763339],[11.023750305175781,50.984937248396015],[11.022323369979858,50.984288853430854],[11.02204442024231,50.98414026164247],[11.020585298538208,50.98312712313628],[11.019952297210693,50.982985281981016],[11.017967462539673,50.983005545029734],[11.017817258834839,50.98268808958381],[11.01528525352478,50.98172220115393],[11.014705896377563,50.98159386481521],[11.014502048492432,50.98069550051125],[11.014351844787598,50.9803442556055],[11.013847589492798,50.97915540697683],[11.013332605361938,50.978142159686556],[11.012624502182007,50.97755446612691],[11.012431383132935,50.97751393526241],[11.011433601379395,50.977041072562585],[11.010017395019531,50.976683044743815],[11.00830078125,50.97630474820017],[11.00831687450409,50.97556503444681],[11.008724570274353,50.974720597950764],[11.009234189987183,50.97397410330144],[11.009695529937744,50.973369467618],[11.010113954544067,50.97270064355811],[11.010248064994812,50.97254188087684],[11.01054847240448,50.97211963706204],[11.011004447937012,50.97143390492732],[11.011342406272888,50.9711535287739],[11.011680364608765,50.971004894945835],[11.01178765296936,50.970940712009416],[11.012195348739624,50.97073802846999],[11.01227045059204,50.970690735516825],[11.012667417526245,50.97050831938935],[11.01327896118164,50.97056236868702],[11.013579368591309,50.970670467093605],[11.01455569267273,50.97066033287869],[11.014636158943176,50.97063330829472],[11.014915108680725,50.97064006444218],[11.015333533287048,50.970650198661524],[11.015515923500061,50.970643442515545],[11.015709042549133,50.97062317407169],[11.016342043876646,50.97056743580544],[11.017197668552399,50.97055561252824],[11.017479300498962,50.970564057726534],[11.018106937408445,50.97057588100158],[11.018495857715607,50.97058094811855],[11.019558012485504,50.9705961494661],[11.019871830940247,50.9706417534789],[11.020810604095459,50.97067553420025],[11.021151244640349,50.97074647363511],[11.021615266799927,50.970830925202016],[11.021864712238312,50.970857949671],[11.022559404373169,50.97099476080389],[11.022701561450958,50.97103867540307],[11.023012697696686,50.97118730912302],[11.024262607097626,50.97161969542192],[11.024689078330994,50.971805485173284],[11.02477490901947,50.97170414540105],[11.025182604789734,50.971514977234555],[11.026207208633421,50.971288650023],[11.026588082313538,50.97126500383277],[11.027918457984924,50.97139674673924],[11.0282564163208,50.971514977234555],[11.02953314781189,50.97181899712623],[11.030520200729368,50.972136526888356],[11.031920313835142,50.97258579401319],[11.032054424285889,50.97266010845706],[11.032564043998718,50.972835760306204],[11.032580137252806,50.97279522532303],[11.03325605392456,50.973045190488826],[11.03350818157196,50.97306545787572],[11.033792495727539,50.9731431494436],[11.033733487129211,50.97321746299562],[11.034548878669737,50.97350120455494],[11.035884618759155,50.97392005797415],[11.036458611488342,50.973055324183385],[11.037059426307676,50.972204086132116],[11.037687063217163,50.97128527199656],[11.037896275520325,50.97136296654243],[11.037118434906006,50.97247094418425],[11.037134528160095,50.97259254987664],[11.038663387298582,50.973072213669404],[11.038379073143005,50.97340662422779],[11.036812663078306,50.972899940623826]]]}}]}';
	
	
	const mapDiv = document.getElementById("map");
	const mymap = L.map(mapDiv).setView([50.9745522, 11.0354019], 13);

	L.tileLayer('https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token=pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpejY4NXVycTA2emYycXBndHRqcmZ3N3gifQ.rJcFIG214AriISLbB6B5aw', {
		maxZoom: 18,
		attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, ' +
			'<a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, ' +
			'Imagery Â© <a href="https://www.mapbox.com/">Mapbox</a>',
		id: 'mapbox/streets-v11',
		tileSize: 512,
		zoomOffset: -1
	}).addTo(mymap);
	
	L.easyButton('&curren;', function(btn, map){
		getLocation()
	}).addTo( mymap );
	
	var marker = L.marker([50.9745522, 11.0354019]).addTo(mymap)
		.bindPopup("You?")

	var popup = L.popup();

	function onMapClick(e) {
		popup
			.setLatLng(e.latlng)
			.setContent("You clicked the map at " + e.latlng.toString())
			.openOn(mymap);
	}

	mymap.on('click', onMapClick);
	
	window.onload = function() {
	  var xhr = new XMLHttpRequest();
	  xhr.open('GET', 'erfurt.geojson');
	  xhr.setRequestHeader('Content-Type', 'application/json');
	  xhr.onload = function() {
		if (xhr.status === 200) {
			L.geoJSON(JSON.parse(xhr.responseText)).addTo(mymap);
		}
	  };
	  xhr.send();
	}
	
	function getLocation() {
	  if (navigator.geolocation) {
		navigator.geolocation.getCurrentPosition(showPosition);
	  } else { 
		x.innerHTML = "Geolocation is not supported by this browser.";
	  }
	}
	
	function showPosition(position) {
		var newLatLng = new L.LatLng(position.coords.latitude, position.coords.longitude);
		marker.setLatLng(newLatLng); 
	}
	
	const resizeObserver = new ResizeObserver(() => {
	  mymap.invalidateSize();
	});

	resizeObserver.observe(mapDiv);

</script>
</body>
</html>
